<div class="toggleWrapper">
    <input type="checkbox" class="dn" id="theme-toggle" onclick="modeSwitcher()" checked />
    <label for="theme-toggle" class="toggle">
    <span class="toggle__handler">
      <span class="crater crater--1"></span>
      <span class="crater crater--2"></span>
      <span class="crater crater--3"></span>
    </span>
        <span class="star star--1"></span>
        <span class="star star--2"></span>
        <span class="star star--3"></span>
        <span class="star star--4"></span>
        <span class="star star--5"></span>
        <span class="star star--6"></span>
    </label>
    <span class="tooltip">
        Applying theme may need to refresh pages.
    </span>
</div>

<style>
    @media only screen and (min-width: 910px) {
        .toggleWrapper .tooltip {
            visibility: hidden;
            width: 200px;
            bottom: 120%;
            left: 50%;
            margin-left: -100px;
            background-color: #1E2227;
            color: #DAE4ED;
            text-align: center;
            padding: 5px 5px;
            border-radius: 6px;
        
            position: absolute;
            z-index: 1;
        }
	}

    @media only screen and (max-width: 910px) {
        .toggleWrapper .tooltip {
            visibility: hidden;
            width: 200px;
            background-color: #1E2227;
            color: #DAE4ED;
            text-align: center;
            padding: 5px 5px;
            border-radius: 6px;
        
            position: absolute;
            z-index: 1;
            top: -15px;
            right: 105%;
        }
	}

    .toggleWrapper:hover .tooltip {
        visibility: visible;
    }
</style>

<script type="text/javascript">
const theme = localStorage.getItem('theme');

if (theme === "light") {
    document.documentElement.setAttribute('data-theme', 'light');
} else {
    document.documentElement.setAttribute('data-theme', 'dark');
}
const userPrefers = getComputedStyle(document.documentElement).getPropertyValue('content');

function activateDarkTheme() {
    document.getElementById('theme-toggle').checked = true;
    document.documentElement.setAttribute('data-theme', 'dark');
    document.documentElement.classList.add('theme--dark');
    document.documentElement.classList.remove('theme--light');
	document.getElementById("theme-toggle").className = 'light';
	window.localStorage.setItem('theme', 'dark');
}

function activateLightTheme() {
    document.getElementById('theme-toggle').checked = false;
    document.documentElement.setAttribute('data-theme', 'light');
    document.documentElement.classList.add('theme--light');
    document.documentElement.classList.remove('theme--dark');
	document.getElementById("theme-toggle").className = 'dark';
	window.localStorage.setItem('theme', 'light');
}

if (theme === "dark") {
    activateDarkTheme();
} else if (theme === "light") {
    activateLightTheme();
} else if  (userPrefers === "light") {
    activateDarkTheme();
} else {
    activateDarkTheme();
}

function modeSwitcher() {
	let currentMode = document.documentElement.getAttribute('data-theme');
	if (currentMode === "dark") {
	    activateLightTheme();
	} else {
	    activateDarkTheme();
	}
}
</script>
